<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head></h:head>

<ui:composition>
<h:outputStylesheet  name="style.css"></h:outputStylesheet>
<h:outputScript name="js/gmap_utils.js" />
	<div class="dashboard">
		<h:form>
			<div class="filter-area">
				<p:inputText id="search" placeholder="Search"
					styleClass="search-input" value="#{myAdsBean.query}">
					<p:ajax event="keyup" process="search, need, offer" update="ads"
						listener="#{myAdsBean.filterAds}" />
				</p:inputText>

				<p:outputLabel for="@next" value="Need" styleClass="md"></p:outputLabel>
				<p:selectBooleanCheckbox styleClass="md" id="need"
					value="#{myAdsBean.need}">
					<p:ajax update="ads" process="search, need, offer"
						listener="#{myAdsBean.filterAds}" />
				</p:selectBooleanCheckbox>

				<p:outputLabel style="margin-left: 10px;" for="@next" value="Offer" styleClass="md"></p:outputLabel>
				<p:selectBooleanCheckbox styleClass="md" id="offer"
					value="#{myAdsBean.offer}">
					<p:ajax update="ads" process="search, need , offer"
						listener="#{myAdsBean.filterAds}" />
				</p:selectBooleanCheckbox>
			</div>
			<p:dataScroller id="ads" value="#{myAdsBean.ads}" var="ad"
				chunkSize="10" styleClass="datascroller">
				<f:facet name="header">Scroll for more ads</f:facet>
				<h:panelGrid columns="1" style="width:100%;">
					<p:outputPanel>
						<div class="#{ad.category == 0 ? 'offer-title' : 'need-title'}"
							align="center">
							<p:outputLabel value="#{ad.category == 0? 'Offer:' : 'Need:'}" style="font-weight:bold;float:left"></p:outputLabel>
							<h:outputText value="#{ad.title}" styleClass="ad-font" style="float:left" />
							<p:commandButton style="float: right;margin-right:5px;margin-top:-3px;" rendered="#{ad.from or ad.to}"
						  value="Show more" action="/user/ad_detail.xhtml?faces-redirect=true" ajax="false">
						  <f:setPropertyActionListener value="#{ad}"
							target="#{adUserBean.ad}" />
						</p:commandButton>
							<p:commandButton style="float: right;margin-right:5px;margin-top:-3px;"
						  value="Update" action="/user/update_ad.xhtml?faces-redirect=true" ajax="false">
							<f:setPropertyActionListener value="#{ad}"
							target="#{adUserBean.ad}" />
						</p:commandButton>
						</div>

						<h:panelGrid columns="4" cellpadding="5">
							<h:outputText value="Created:" />
							<h:outputText value="#{ad.createTime}" styleClass="ad-font">
								<f:convertDateTime type="date" pattern="dd/MM/yyyy HH:mm"
									timeZone="Europe/Berlin" />
							</h:outputText>
							<h:outputText value="Start:" />
							<h:outputText value="#{ad.departureTime}" styleClass="ad-font">
								<f:convertDateTime type="date" pattern="dd/MM/yyyy HH:mm"
									timeZone="Europe/Berlin" />
							</h:outputText>
							<h:outputText value="Location from:" />
							<h:outputText value="#{ad.startingPoint}" styleClass="ad-font" />
							
							<h:outputText value="Location to:" />
							<h:outputText value="#{ad.destination}" styleClass="ad-font" />

							
							<h:outputText value="Seats left:" />
							<h:outputText value="#{ad.numberOfPersons}" styleClass="ad-font" />
							<h:outputText value="" />
							<h:outputText value="" />
							
							
							

						</h:panelGrid>
					</p:outputPanel>
				</h:panelGrid>
				<hr></hr>
			</p:dataScroller>
		</h:form>
	</div>
</ui:composition>

</html>


