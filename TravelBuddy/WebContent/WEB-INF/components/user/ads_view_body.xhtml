<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head></h:head>

<ui:composition>
<h:outputStylesheet  name="style.css"></h:outputStylesheet>
<h:outputScript name="js/gmap_utils.js" />
	<div class="dashboard">
		<h:form>
			<p:remoteCommand name="filter" update="ads" actionListener="#{adViewBean.filterAds}"></p:remoteCommand>
			<p:panel header="Filter" styleClass="datascroller">
			<div class="filter-area" style="border-style:none;">
			<p:panelGrid columns="4" cellpadding="5" style="width:100%;">
				<p:outputLabel value="Location from:"></p:outputLabel>
				<p:autoComplete id="from" placeholder="From" minQueryLength="3" queryDelay="100" queryEvent="keyup" completeMethod="#{adViewBean.complete}"
					styleClass="input" value="#{adViewBean.from}" onkeyup="filter()">
				</p:autoComplete>
				<p:outputLabel value="Location to:"></p:outputLabel>
				<p:autoComplete id="to" placeholder="To" minQueryLength="3" queryDelay="100" queryEvent="keyup" completeMethod="#{adViewBean.complete}"
					styleClass="input" value="#{adViewBean.to}" onkeyup="filter()">
				</p:autoComplete>
				<p:outputLabel for="@next" value="Time from:"></p:outputLabel>
				<p:calendar styleClass="input" id="time_from"
					value="#{adViewBean.timeFrom}" navigator="true" 
					requiredMessage="Departure time required." yearRange="1900:2050"
					pattern="dd/MM/yyyy HH:mm" mask="true"  onselect="filter()">
					</p:calendar>
					<p:outputLabel for="@next" value="Time from:"></p:outputLabel>
				<p:calendar styleClass="input" id="time_to"
					value="#{adViewBean.timeTo}"
					label="departure_time" navigator="true"  yearRange="1900:2050"
					pattern="dd/MM/yyyy HH:mm" mask="true" onselect="filter()">
					</p:calendar>
				<p:outputLabel for="@next" value="Need" styleClass="md"></p:outputLabel>
				<p:selectBooleanCheckbox styleClass="md" id="need"
					value="#{adViewBean.need}" onchange="filter()">
				</p:selectBooleanCheckbox>

				<p:outputLabel style="margin-left: 10px;" for="@next" value="Offer" styleClass="md"></p:outputLabel>
				<p:selectBooleanCheckbox styleClass="md" id="offer"
					value="#{adViewBean.offer}" onchange="filter()">
				</p:selectBooleanCheckbox>
				</p:panelGrid>
			</div>
			</p:panel>
			<p:dataScroller id="ads" value="#{adViewBean.ads}" var="ad"
				chunkSize="10" styleClass="datascroller">
				<f:facet name="header">Scroll for more ads</f:facet>
				<h:panelGrid columns="1" style="width:100%;">
					<p:outputPanel>
						<div class="#{ad.category == 0 ? 'offer-title' : 'need-title'}"
							align="center">
							<p:outputLabel value="#{ad.category == 0? 'Offer:' : 'Need:'}" style="font-weight:bold;float:left"></p:outputLabel>
							<h:outputText value="#{ad.title}" styleClass="ad-font" style="float:left" />
						<p:commandButton style="float: right;margin-right:5px;margin-top:-3px;" rendered="#{ad.from or ad.to}"
						  value="Show more" action="/user/ad_detail.xhtml?faces-redirect=true" ajax="false">
							<f:setPropertyActionListener value="#{ad}"
							target="#{adViewBean.selectedAd}" />
						</p:commandButton>
						</div>

						<h:panelGrid columns="4" cellpadding="5">
							<h:outputText value="Created:" />
							<h:outputText value="#{ad.createTime}" styleClass="ad-font">
								<f:convertDateTime type="date" pattern="dd/MM/yyyy HH:mm"
									timeZone="Europe/Berlin" />
							</h:outputText>
							<h:outputText value="Created by:" />
							<h:outputText value="#{ad.user.username}" styleClass="ad-font" />
							
							<h:outputText value="Location from:" />
							<h:outputText value="#{ad.startingPoint}" styleClass="ad-font" />
							
							<h:outputText value="Location to:" />
							<h:outputText value="#{ad.destination}" styleClass="ad-font" />

							
							<h:outputText value="Seats left:" />
							<h:outputText value="#{ad.numberOfPersons}" styleClass="ad-font" />
							<h:outputText value="Start:" />
							<h:outputText value="#{ad.departureTime}" styleClass="ad-font">
								<f:convertDateTime type="date" pattern="dd/MM/yyyy HH:mm"
									timeZone="Europe/Berlin" />
							</h:outputText>
							
							
							
							

						</h:panelGrid>
					</p:outputPanel>
				</h:panelGrid>
				<hr></hr>
			</p:dataScroller>
		</h:form>
	</div>
</ui:composition>

</html>


