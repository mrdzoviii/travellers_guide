<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>	
</h:head>

<ui:composition>
	<h:outputScript  name="js/util.js"></h:outputScript>
	<h:outputStylesheet  name="style.css"></h:outputStylesheet>
	<h:form id="registration_form">
	<p:growl id="error" life="1800" showDetail="true" globalOnly="true"></p:growl>
	<p:panel header="Registration">
	  <h:panelGrid columns="3" cellpadding="5">
	  	<p:outputLabel styleClass="label" for="name" value="Name:"/>
	  	<p:inputText id="name" value="#{userBean.user.name}" required="true" requiredMessage="Name must be entered." 
	  	validatorMessage="Name length must be between 2 and 50 characters." styleClass="input">
	  	<f:validateLength minimum="2" maximum="50"></f:validateLength>
	  	</p:inputText>
	  	<p:message for="name" display="text"></p:message>
	  	
	  	<p:outputLabel styleClass="label" for="surname" value="Surname:"/>
	  	<p:inputText id="surname" value="#{userBean.user.surname}" required="true" requiredMessage="Surname must be entered." 
	  	validatorMessage="Surname length must be between 2 and 50 characters." styleClass="input">
	  	<f:validateLength minimum="2" maximum="50"></f:validateLength>
	  	</p:inputText>
	  	<p:message for="surname" display="text"></p:message>
	  	
	  	<p:outputLabel styleClass="label" for="email" value="Email:"/>
	  	<p:inputText id="email" value="#{userBean.user.email}" required="true" requiredMessage="Email must be entered." 
	  	validatorMessage="Email not valid" styleClass="input">
	  	<f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$"></f:validateRegex>
	  	</p:inputText>
	  	<p:message for="email" display="text"></p:message>
	  	
	  	<p:outputLabel styleClass="label" for="birth_date" value="Birthday:" />
		<p:calendar styleClass="input" id="birth_date" value="#{userBean.user.birthDate}"
				required="true" label="birth_date" navigator="true" requiredMessage="Enter birthday"
				yearRange="1900:2050" pattern="dd/MM/yyyy" mask="true" maxdate="#{userBean.today}" />
		<p:message for="birth_date" display="text"></p:message>
		
		 <p:outputLabel styleClass="label" for="username" value="Username:"/>
	  	<p:inputText id="username" value="#{userBean.user.username}" required="true" requiredMessage="Username must be entered." 
	  	validatorMessage="Username length must be 12 and greater. Forbidden charcaters are @, #, /" styleClass="input">
	  	<f:validateRegex pattern="^[^@#/]{12,}$"></f:validateRegex>
	  	</p:inputText>
	  	<p:message for="username" display="text"></p:message>
	  	
	  	<p:outputLabel styleClass="label" for="password" value="Password:"/>
	  	<p:password id="password" value="#{userBean.user.password}" required="true" requiredMessage="Password must be entered." 
	  	validatorMessage="Password length must be 15 and greater and must contains upper and lower letters and digits" styleClass="input">
	  	<f:validateRegex pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{15,}$"></f:validateRegex>
	  	</p:password>
	  	<p:message for="password" display="text"></p:message>
	  	
	  	<p:outputLabel styleClass="label" for="password_confirmation" value="Re-enter password:"/>
	  	<p:password id="password_confirmation" value="#{userBean.passwordConfirmation}" required="true" requiredMessage="Password must be entered."  
	  	 styleClass="input" validatorMessage="Password not match.">
	  	</p:password>
	  	<p:message for="password_confirmation" display="text"></p:message>
	  	
	  	<p:outputLabel value="" styleClass="label"></p:outputLabel>
	  	<p:commandButton id="registration_button" styleClass="registration-button" ajax="false"
	  	value="Register" actionListener="#{userBean.registration}" update="registration_form"></p:commandButton>
	  	<p:outputLabel value="" styleClass="label"></p:outputLabel>
	  </h:panelGrid>
	  </p:panel>
	</h:form>
	
</ui:composition>

</html>


